name: Build Catalogue Scanner
description: Sets up the required .NET SDKs and builds the Catalogue Scanner solution

inputs:
  solution-file:
    description: The path of the solution file to build. Defaults to building the current directory if not provided.
    required: false
    default: .

  configuration:
    description: The build configuration to use
    required: false
    default: Release

runs:
  using: composite
  steps:
    - name: Setup .NET 5
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 5.0.x

    - name: Setup .NET 6
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 6.0.x

    - name: Restore dependencies
      run: dotnet restore --locked-mode ${{ inputs.solution-file }}
      shell: bash

    - name: Build
      run: dotnet build --no-restore --configuration ${{ inputs.configuration }} ${{ inputs.solution-file }}
      shell: bash
